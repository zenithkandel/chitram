<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="/">चित्रम्</a>
            </div>
            <ul class="nav-links">
                <li><a href="/">Home</a></li>
                <li><a href="/about">About</a></li>
                <li><a href="/artists" class="active">Artists</a></li>
                <li><a href="/gallery">Gallery</a></li>
                <li><a href="/apply">Apply as Artist</a></li>
                <li><a href="/track-orders">Track Orders</a></li>
                <li><a href="/cart">Cart</a></li>
            </ul>
        </div>
    </nav>

    <main class="main-content">
        <div class="container">
            <!-- Breadcrumb -->
            <div class="breadcrumb">
                <a href="/">Home</a>
                <span class="separator">/</span>
                <a href="/artists">Artists</a>
                <span class="separator">/</span>
                <span class="current"><%= artist.full_name %></span>
            </div>

            <!-- Artist Detail Content -->
            <div class="artist-detail-container">
                <!-- Artist Header -->
                <div class="artist-header">
                    <div class="artist-profile">
                        <div class="artist-image">
                            <% if (artist.profile_image) { %>
                                <img src="/uploads/profiles/<%= artist.profile_image %>" 
                                     alt="<%= artist.full_name %>" 
                                     onerror="this.src='/images/default-avatar.png'">
                            <% } else { %>
                                <div class="default-avatar">
                                    <i class="fas fa-user"></i>
                                </div>
                            <% } %>
                        </div>
                        <div class="artist-info">
                            <h1 class="artist-name"><%= artist.full_name %></h1>
                            <div class="artist-meta">
                                <span class="art-style"><i class="fas fa-palette"></i> <%= artist.art_style || 'Mixed Media' %></span>
                                <span class="experience"><i class="fas fa-star"></i> <%= artist.experience_years || 0 %> years experience</span>
                                <span class="location"><i class="fas fa-map-marker-alt"></i> <%= artist.address || 'Location not specified' %></span>
                            </div>
                            <div class="artist-stats">
                                <div class="stat-item">
                                    <span class="stat-number"><%= stats.total_artworks %></span>
                                    <span class="stat-label">Artworks</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-number"><%= stats.categories_count %></span>
                                    <span class="stat-label">Categories</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-number">₹<%= stats.formatted_average_price %></span>
                                    <span class="stat-label">Avg. Price</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="artist-actions">
                        <button class="btn btn-primary contact-artist" data-artist-id="<%= artist.unique_id %>">
                            <i class="fas fa-envelope"></i>
                            Contact Artist
                        </button>
                        <button class="btn btn-secondary follow-artist" data-artist-id="<%= artist.unique_id %>">
                            <i class="fas fa-heart"></i>
                            Follow
                        </button>
                    </div>
                </div>

                <!-- Artist Biography -->
                <% if (artist.bio) { %>
                <div class="artist-section">
                    <h2 class="section-title">About the Artist</h2>
                    <div class="artist-bio">
                        <p><%= artist.bio %></p>
                    </div>
                </div>
                <% } %>

                <!-- Portfolio Images -->
                <% if (artist.portfolio_images && artist.portfolio_images.length > 0) { %>
                <div class="artist-section">
                    <h2 class="section-title">Portfolio</h2>
                    <div class="portfolio-gallery">
                        <% artist.portfolio_images.forEach(function(image, index) { %>
                            <div class="portfolio-item">
                                <img src="/uploads/profiles/<%= image %>" 
                                     alt="Portfolio Image <%= index + 1 %>"
                                     onclick="openLightbox(this.src)"
                                     onerror="this.style.display='none'">
                            </div>
                        <% }); %>
                    </div>
                </div>
                <% } %>

                <!-- Artist's Artworks -->
                <div class="artist-section">
                    <h2 class="section-title">
                        Artworks by <%= artist.full_name %>
                        <span class="artwork-count">(<%= stats.total_artworks %> pieces)</span>
                    </h2>
                    
                    <% if (artworks && artworks.length > 0) { %>
                        <div class="artworks-grid">
                            <% artworks.forEach(function(artwork) { %>
                                <div class="artwork-card">
                                    <div class="artwork-image">
                                        <img src="/uploads/artworks/<%= artwork.image_url %>" 
                                             alt="<%= artwork.title %>"
                                             onerror="this.src='/images/placeholder-art.png'">
                                        <div class="artwork-overlay">
                                            <button class="btn btn-small view-artwork" data-artwork-id="<%= artwork.id %>">
                                                <i class="fas fa-eye"></i>
                                                View Details
                                            </button>
                                        </div>
                                    </div>
                                    <div class="artwork-info">
                                        <h3 class="artwork-title"><%= artwork.title %></h3>
                                        <p class="artwork-category"><%= artwork.category %></p>
                                        <div class="artwork-price">₹<%= artwork.formatted_price %></div>
                                        <div class="artwork-date">Created: <%= artwork.formatted_created_at %></div>
                                    </div>
                                </div>
                            <% }); %>
                        </div>
                    <% } else { %>
                        <div class="no-artworks">
                            <i class="fas fa-paint-brush"></i>
                            <h3>No Artworks Yet</h3>
                            <p>This artist hasn't uploaded any artworks yet. Check back later!</p>
                        </div>
                    <% } %>
                </div>

                <!-- Certificates -->
                <% if (artist.certificates && artist.certificates.length > 0) { %>
                <div class="artist-section">
                    <h2 class="section-title">Certificates & Achievements</h2>
                    <div class="certificates-grid">
                        <% artist.certificates.forEach(function(certificate, index) { %>
                            <div class="certificate-item">
                                <img src="/uploads/profiles/<%= certificate %>" 
                                     alt="Certificate <%= index + 1 %>"
                                     onclick="openLightbox(this.src)"
                                     onerror="this.style.display='none'">
                            </div>
                        <% }); %>
                    </div>
                </div>
                <% } %>
            </div>
        </div>
    </main>

    <!-- Lightbox Modal -->
    <div id="lightbox" class="lightbox" onclick="closeLightbox()">
        <span class="lightbox-close">&times;</span>
        <img class="lightbox-content" id="lightbox-img">
    </div>

    <!-- Contact Artist Modal -->
    <div id="contactModal" class="modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h2>Contact <%= artist.full_name %></h2>
            <form id="contactArtistForm">
                <input type="hidden" id="artistId" value="<%= artist.unique_id %>">
                <div class="form-group">
                    <label for="senderName">Your Name:</label>
                    <input type="text" id="senderName" name="senderName" required>
                </div>
                <div class="form-group">
                    <label for="senderEmail">Your Email:</label>
                    <input type="email" id="senderEmail" name="senderEmail" required>
                </div>
                <div class="form-group">
                    <label for="subject">Subject:</label>
                    <input type="text" id="subject" name="subject" required>
                </div>
                <div class="form-group">
                    <label for="message">Message:</label>
                    <textarea id="message" name="message" rows="5" required></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Send Message</button>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 चित्रम्. All rights reserved.</p>
        </div>
    </footer>

    <script src="/js/main.js"></script>
    <script>
        // Lightbox functionality
        function openLightbox(src) {
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            lightboxImg.src = src;
            lightbox.style.display = 'block';
        }

        function closeLightbox() {
            document.getElementById('lightbox').style.display = 'none';
        }

        // Modal functionality
        const contactModal = document.getElementById('contactModal');
        const contactBtn = document.querySelector('.contact-artist');
        const modalClose = document.querySelector('.modal-close');

        contactBtn.addEventListener('click', function() {
            contactModal.style.display = 'block';
        });

        modalClose.addEventListener('click', function() {
            contactModal.style.display = 'none';
        });

        window.addEventListener('click', function(event) {
            if (event.target === contactModal) {
                contactModal.style.display = 'none';
            }
        });

        // Follow artist functionality
        document.querySelector('.follow-artist').addEventListener('click', function() {
            const artistId = this.getAttribute('data-artist-id');
            // TODO: Implement follow functionality
            alert('Follow functionality will be implemented soon!');
        });

        // View artwork details
        document.querySelectorAll('.view-artwork').forEach(function(btn) {
            btn.addEventListener('click', function() {
                const artworkId = this.getAttribute('data-artwork-id');
                // TODO: Navigate to artwork detail page
                alert(`Artwork detail page for ID ${artworkId} will be implemented soon!`);
            });
        });

        // Contact artist form submission
        document.getElementById('contactArtistForm').addEventListener('submit', function(e) {
            e.preventDefault();
            // TODO: Implement contact artist functionality
            alert('Contact artist functionality will be implemented soon!');
        });
    </script>
</body>
</html>
